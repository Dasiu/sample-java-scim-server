/*C3*/SET SCHEMA PUBLIC
drop table groupmemberships if exists
drop table groups if exists
drop table requests if exists
drop table transactions if exists
drop table users if exists
create table groupmemberships (id varchar(36) not null, display varchar(255), group_id varchar(36) not null, value varchar(36) not null, primary key (id))
create table groups (id varchar(36) not null, display_name varchar(250) not null, primary key (id))
create table requests (id varchar(36) not null, endpoint varchar(250), method varchar(20), time_stamp varchar(255) not null, primary key (id))
create table transactions (id varchar(36) not null, endpoint varchar(250), http_code integer, java_method varchar(300), method varchar(20), request_body varchar(2147483647), request_id varchar(36), response_body varchar(2147483647), time_stamp varchar(255) not null, primary key (id))
create table users (id varchar(36) not null, active boolean default false, family_name varchar(250), given_name varchar(250), middle_name varchar(250), user_name varchar(250) not null, primary key (id))
alter table users add constraint UK_k8d0f2n7n88w1a16yhua64onx unique (user_name)
INSERT INTO REQUESTS VALUES('a515e001-26be-4148-a77c-10cfbdd8fae3','/','GET','2018-08-03T10:37:51.366Z')
COMMIT
INSERT INTO REQUESTS VALUES('2d10abdc-dbdc-4454-ae67-83f9842d7975','/scim/v2/Users','POST','2018-08-03T10:37:57.047Z')
COMMIT
INSERT INTO USERS VALUES('67b43e64-ed9e-45c8-b919-24b78e430c47',TRUE,'Doe','Jamie',NULL,'jamie.doe@scim.org')
COMMIT
INSERT INTO TRANSACTIONS VALUES('fcd50aeb-4d23-4ec6-bf33-b43dceac2735','/scim/v2/Users',201,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.UsersController.usersPost(java.util.Map<java.lang.String, java.lang.Object>,javax.servlet.http.HttpServletResponse)] and 4 interceptors','POST','{\u000a\u0009"schemas": [\u000a\u0009\u0009"urn:ietf:params:scim:schemas:core:2.0:User"\u000a\u0009],\u000a\u0009"userName": "jamie.doe@scim.org",\u000a\u0009"name": {\u000a\u0009\u0009"givenName": "Jamie",\u000a\u0009\u0009"familyName": "Doe"\u000a\u0009},\u000a\u0009"emails": [\u000a\u0009\u0009{\u000a\u0009\u0009\u0009"primary": true,\u000a\u0009\u0009\u0009"value": "jamie.doe@scim.org",\u000a\u0009\u0009\u0009"type": "work"\u000a\u0009\u0009}\u000a\u0009],\u000a\u0009"displayName": "Jamie Doe",\u000a\u0009"locale": "en-US",\u000a\u0009"externalId": "00ufuzvb73DuxqoHh0h7",\u000a\u0009"groups": [],\u000a\u0009"password": "6wW5P48v",\u000a\u0009"active": true\u000a}','2d10abdc-dbdc-4454-ae67-83f9842d7975','{"emails":[{"type":"work","value":"jamie.doe@scim.org","primary":true}],"meta":{"meta":"/scim/v2/Users/67b43e64-ed9e-45c8-b919-24b78e430c47","resourceType":"User"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"name":{"familyName":"Doe","givenName":"Jamie","middleName":null},"active":true,"id":"67b43e64-ed9e-45c8-b919-24b78e430c47","userName":"jamie.doe@scim.org"}','2018-08-03T10:37:57.119Z')
COMMIT
INSERT INTO REQUESTS VALUES('904eb348-5b69-4c79-9f37-fe19c62bff08','/scim/v2/Users','POST','2018-08-03T10:38:04.271Z')
COMMIT
INSERT INTO USERS VALUES('b22f50bd-1cf8-41f7-bd61-c02c08564ed5',TRUE,'Doe','Johhny',NULL,'johnny.doe@scim.org')
COMMIT
INSERT INTO TRANSACTIONS VALUES('c25f5c4e-3a0a-42d5-8888-71e3c64cf281','/scim/v2/Users',201,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.UsersController.usersPost(java.util.Map<java.lang.String, java.lang.Object>,javax.servlet.http.HttpServletResponse)] and 4 interceptors','POST','{\u000a\u0009"schemas": [\u000a\u0009\u0009"urn:ietf:params:scim:schemas:core:2.0:User"\u000a\u0009],\u000a\u0009"userName": "johnny.doe@scim.org",\u000a\u0009"name": {\u000a\u0009\u0009"givenName": "Johhny",\u000a\u0009\u0009"familyName": "Doe"\u000a\u0009},\u000a\u0009"emails": [\u000a\u0009\u0009{\u000a\u0009\u0009\u0009"primary": true,\u000a\u0009\u0009\u0009"value": "johnny.doe@scim.org",\u000a\u0009\u0009\u0009"type": "work"\u000a\u0009\u0009}\u000a\u0009],\u000a\u0009"displayName": "Johnny Doe",\u000a\u0009"locale": "en-US",\u000a\u0009"externalId": "00ufuzvb73DuxqoHh0h7",\u000a\u0009"groups": [],\u000a\u0009"password": "6wW5P48v",\u000a\u0009"active": true\u000a}','904eb348-5b69-4c79-9f37-fe19c62bff08','{"emails":[{"type":"work","value":"johnny.doe@scim.org","primary":true}],"meta":{"meta":"/scim/v2/Users/b22f50bd-1cf8-41f7-bd61-c02c08564ed5","resourceType":"User"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"name":{"familyName":"Doe","givenName":"Johhny","middleName":null},"active":true,"id":"b22f50bd-1cf8-41f7-bd61-c02c08564ed5","userName":"johnny.doe@scim.org"}','2018-08-03T10:38:04.277Z')
COMMIT
INSERT INTO REQUESTS VALUES('d90ee8b6-0b5a-4569-bbfc-ff341ae3825d','/scim/v2/Groups','POST','2018-08-03T10:38:10.180Z')
COMMIT
INSERT INTO GROUPS VALUES('0c32051d-0083-4d38-b2ed-b04994ffd6d1','Jamie Group')
COMMIT
INSERT INTO GROUPMEMBERSHIPS VALUES('1c2d92dd-7fda-44d3-a361-8b9067334a17','jamie.doe@scim.org','0c32051d-0083-4d38-b2ed-b04994ffd6d1','67b43e64-ed9e-45c8-b919-24b78e430c47')
COMMIT
INSERT INTO TRANSACTIONS VALUES('0dc86173-9a46-40b8-9aa2-45d84c26410a','/scim/v2/Groups',201,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.GroupsController.groupsPost(java.util.Map<java.lang.String, java.lang.Object>,javax.servlet.http.HttpServletResponse)] and 4 interceptors','POST','{\u000a\u0009"schemas": [\u000a\u0009\u0009"urn:ietf:params:scim:schemas:core:2.0:Group"\u000a\u0009],\u000a\u0009"displayName": "Jamie Group",\u000a\u0009"members": [\u000a\u0009\u0009{\u000a\u0009\u0009\u0009"value": "67b43e64-ed9e-45c8-b919-24b78e430c47",\u000a\u0009\u0009\u0009"display": "jamie.doe@scim.org"\u000a\u0009\u0009}\u000a\u0009]\u000a}','d90ee8b6-0b5a-4569-bbfc-ff341ae3825d','{"displayName":"Jamie Group","meta":{"meta":"/scim/v2/Groups/0c32051d-0083-4d38-b2ed-b04994ffd6d1","resourceType":"Group"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"members":[{"value":"67b43e64-ed9e-45c8-b919-24b78e430c47","display":"jamie.doe@scim.org"}],"id":"0c32051d-0083-4d38-b2ed-b04994ffd6d1"}','2018-08-03T10:38:10.195Z')
COMMIT
INSERT INTO REQUESTS VALUES('2ba1f572-fc66-468a-a04d-edd2e9667b93','/','GET','2018-08-03T10:38:14.796Z')
COMMIT
INSERT INTO REQUESTS VALUES('4a448007-57af-483c-848e-56ab75809499','/scim/v2/Users?startIndex=1&count=100','GET','2018-08-03T10:38:19.652Z')
COMMIT
INSERT INTO TRANSACTIONS VALUES('aa0d6309-a55e-4d74-9484-20063920e00b','/scim/v2/Users?startIndex=1&count=100',200,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.UsersController.usersGet(java.util.Map<java.lang.String, java.lang.String>)] and 4 interceptors','GET','[unknown]','4a448007-57af-483c-848e-56ab75809499','{"totalResults":2,"startIndex":0,"itemsPerPage":100,"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"Resources":[{"emails":[{"type":"work","value":"jamie.doe@scim.org","primary":true}],"meta":{"meta":"/scim/v2/Users/67b43e64-ed9e-45c8-b919-24b78e430c47","resourceType":"User"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"name":{"familyName":"Doe","givenName":"Jamie","middleName":null},"active":true,"id":"67b43e64-ed9e-45c8-b919-24b78e430c47","userName":"jamie.doe@scim.org"},{"emails":[{"type":"work","value":"johnny.doe@scim.org","primary":true}],"meta":{"meta":"/scim/v2/Users/b22f50bd-1cf8-41f7-bd61-c02c08564ed5","resourceType":"User"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"name":{"familyName":"Doe","givenName":"Johhny","middleName":null},"active":true,"id":"b22f50bd-1cf8-41f7-bd61-c02c08564ed5","userName":"johnny.doe@scim.org"}]}','2018-08-03T10:38:19.679Z')
COMMIT
INSERT INTO REQUESTS VALUES('216d9e61-3658-4131-b474-c5c14864ec1a','/scim/v2/Groups?startIndex=1&count=100','GET','2018-08-03T10:38:19.855Z')
COMMIT
INSERT INTO TRANSACTIONS VALUES('529e129d-014b-44ad-8450-bc57aae5d716','/scim/v2/Groups?startIndex=1&count=100',200,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.GroupsController.groupsGet(java.util.Map<java.lang.String, java.lang.String>)] and 4 interceptors','GET','[unknown]','216d9e61-3658-4131-b474-c5c14864ec1a','{"totalResults":1,"startIndex":0,"itemsPerPage":100,"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"Resources":[{"displayName":"Jamie Group","meta":{"meta":"/scim/v2/Groups/0c32051d-0083-4d38-b2ed-b04994ffd6d1","resourceType":"Group"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"members":[{"display":"jamie.doe@scim.org","value":"67b43e64-ed9e-45c8-b919-24b78e430c47"}],"id":"0c32051d-0083-4d38-b2ed-b04994ffd6d1"}]}','2018-08-03T10:38:19.869Z')
COMMIT
INSERT INTO REQUESTS VALUES('39fc2937-3028-4f57-8479-1f742569ed81','/','GET','2018-08-03T10:38:26.959Z')
COMMIT
INSERT INTO REQUESTS VALUES('632ba893-4437-48cb-b07b-779f4bb0bd4b','/','GET','2018-08-03T10:39:00.619Z')
COMMIT
INSERT INTO REQUESTS VALUES('65631eac-8ed4-4585-b247-6e4d6f01c35c','/scim/v2/Users?startIndex=1&count=100','GET','2018-08-03T10:39:47.027Z')
COMMIT
INSERT INTO TRANSACTIONS VALUES('e6a27f2f-6d6d-471c-9a4a-973f9d4d4adf','/scim/v2/Users?startIndex=1&count=100',200,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.UsersController.usersGet(java.util.Map<java.lang.String, java.lang.String>)] and 4 interceptors','GET','[unknown]','65631eac-8ed4-4585-b247-6e4d6f01c35c','{"totalResults":2,"startIndex":0,"itemsPerPage":100,"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"Resources":[{"emails":[{"type":"work","value":"jamie.doe@scim.org","primary":true}],"meta":{"meta":"/scim/v2/Users/67b43e64-ed9e-45c8-b919-24b78e430c47","resourceType":"User"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"name":{"familyName":"Doe","givenName":"Jamie","middleName":null},"active":true,"id":"67b43e64-ed9e-45c8-b919-24b78e430c47","userName":"jamie.doe@scim.org"},{"emails":[{"type":"work","value":"johnny.doe@scim.org","primary":true}],"meta":{"meta":"/scim/v2/Users/b22f50bd-1cf8-41f7-bd61-c02c08564ed5","resourceType":"User"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"name":{"familyName":"Doe","givenName":"Johhny","middleName":null},"active":true,"id":"b22f50bd-1cf8-41f7-bd61-c02c08564ed5","userName":"johnny.doe@scim.org"}]}','2018-08-03T10:39:47.032Z')
COMMIT
INSERT INTO REQUESTS VALUES('32457abf-d601-495e-913a-6d09ac20e942','/scim/v2/Groups?startIndex=1&count=100','GET','2018-08-03T10:39:47.205Z')
COMMIT
INSERT INTO TRANSACTIONS VALUES('faeb8142-19e6-44b5-bdc6-14e962ba8c00','/scim/v2/Groups?startIndex=1&count=100',200,'HandlerExecutionChain with handler [public java.util.Map com.okta.scim.controllers.GroupsController.groupsGet(java.util.Map<java.lang.String, java.lang.String>)] and 4 interceptors','GET','[unknown]','32457abf-d601-495e-913a-6d09ac20e942','{"totalResults":1,"startIndex":0,"itemsPerPage":100,"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"Resources":[{"displayName":"Jamie Group","meta":{"meta":"/scim/v2/Groups/0c32051d-0083-4d38-b2ed-b04994ffd6d1","resourceType":"Group"},"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"members":[{"display":"jamie.doe@scim.org","value":"67b43e64-ed9e-45c8-b919-24b78e430c47"}],"id":"0c32051d-0083-4d38-b2ed-b04994ffd6d1"}]}','2018-08-03T10:39:47.211Z')
COMMIT
INSERT INTO REQUESTS VALUES('dff12f46-11c2-4650-ba3f-69bcdc894a5e','/','GET','2018-08-03T10:40:07.001Z')
COMMIT
